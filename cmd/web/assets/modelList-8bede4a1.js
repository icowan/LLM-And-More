import{d as X,x as W,z as ee,r as v,aC as z,aB as O,a8 as Y,U,k as P,l as E,m as l,W as u,j as e,n as a,_ as m,Z as K,F as te,Y as q,al as de,am as re,av as F,Q as ge,a3 as ke,ac as ve,at as Te,au as Ue,o as Ce,aA as Ne,$ as G}from"./utils-77c08ab5.js";import{_ as Me}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-e0949a2f.js";import{_ as De}from"./UiParentCard.vue_vue_type_script_setup_true_lang-6167d1cf.js";import{A as Pe}from"./AlertBlock-26aa6037.js";import{C as we}from"./ChipBoolean-92f0f28b.js";import{C as Ie}from"./ChipStatus-9dfcdf28.js";import{_ as N}from"./Explain.vue_vue_type_style_index_0_lang-18bfa29b.js";import{c as $e,a5 as g,ae as Se,_ as ne,V as J,ac as Fe}from"./index-733db90d.js";import{V as le}from"./VSwitch-32a6774f.js";import{V as Be}from"./VTextarea-9873bc54.js";import{V as Ge,a as qe,b as Ae,c as Le}from"./VExpansionPanel-455bf48b.js";import{V as se,a as j}from"./VRadioGroup-b794025b.js";import{V as ue}from"./VForm-88c73c89.js";import{V as ae}from"./VCheckbox-0ab114a0.js";import{_ as Qe}from"./ConfirmByInput.vue_vue_type_style_index_0_lang-cc2d4c02.js";import{_ as Re}from"./ConfirmByClick.vue_vue_type_style_index_0_lang-e81d5ebc.js";import{V as I}from"./VCol-09692465.js";import{V as oe}from"./VRow-4651af54.js";import"./IconInfoCircle-d5deafef.js";import"./VAlert-ddb36637.js";import"./Confirm-20f5df79.js";var ze=$e("messages","IconMessages",[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]]);const T=C=>(de("data-v-2969599f"),C=C(),re(),C),Ee={class:"mx-auto mt-10",style:{width:"500px"}},We=T(()=>u("label",{class:"required"},"模型名称",-1)),Ye=T(()=>u("label",{class:"required"},"最长上下文",-1)),He={class:"required"},Ke=T(()=>u("label",{class:"required"},"模型类型",-1)),je=T(()=>u("label",null,"备注",-1)),Ze=T(()=>u("label",null,"基础模型",-1)),Je=T(()=>u("label",null,"并行/实例数",-1)),Oe=T(()=>u("label",null,"调度标签",-1)),Xe=T(()=>u("label",null,"k8s集群",-1)),el=T(()=>u("label",null,"推理类型",-1)),ll=T(()=>u("label",null,"CPU数量",-1)),al=T(()=>u("label",null,"GPU数量",-1)),ol=T(()=>u("label",null,"内存",-1)),tl=X({__name:"PaneModel",emits:["submit"],setup(C,{expose:A,emit:L}){const c=W({operateType:"add",disabledField:!1,maxTokens:5e5,formData:{id:"",modelName:"",maxTokens:0,isFineTuning:!1,enabled:!0,remark:"",parameters:0,providerName:"",modelType:null,baseModelName:null,replicas:0,label:null,k8sCluster:null,inferredType:"",cpu:0,gpu:0,memory:0}}),{formData:o}=ee(c),r=L,B=v(),x=v(),V=W({modelName:[i=>z.isModelName({value:i,required:!0})],maxTokens:[i=>i!==""?i<1?"下限 1":i>c.maxTokens?"上限 "+O.commaString(c.maxTokens):!0:"请输入模型最长上下文"],providerName:[i=>i&&i.length>0?!0:"请选择供应"],modelType:[i=>!!i||"请选择模型类型"],replicas:[i=>z.validNumberInput(i,0,50,"",!0)],cpu:[i=>z.validNumberInput(i,0,100,"",!0)],gpu:[i=>z.validNumberInput(i,0,20,"",!0)],memory:[i=>z.validNumberInput(i,0,100,"",!0)]}),$=i=>{i!=="digitalhuman"&&(c.formData.replicas=0,c.formData.label=null,c.formData.k8sCluster=null,c.formData.inferredType="",c.formData.cpu=0,c.formData.gpu=0,c.formData.memory=0)},h=async(i={})=>{const[s,d]=await F.post({...i,showSuccess:!0,url:"/models",data:{...c.formData}});d&&(B.value.hide(),r("submit"))},k=async(i={})=>{const[s,d]=await F.put({...i,showSuccess:!0,url:`/models/${c.formData.id}`,data:{...c.formData}});d&&(B.value.hide(),r("submit"))},w=({valid:i,showLoading:s})=>{i&&(c.operateType=="add"?h({showLoading:s}):k({showLoading:s}))};return A({show({title:i,infos:s={id:"",modelName:"",maxTokens:0,isFineTuning:!1,enabled:!0,remark:"",providerName:"",parameters:0,modelType:null,baseModelName:null,replicas:0,label:null,k8sCluster:null,inferredType:"",cpu:0,gpu:0,memory:0},operateType:d}){B.value.show({title:i,refForm:x}),c.formData=Y.pick(Y.cloneDeep(s),["id","modelName","maxTokens","isFineTuning","enabled","remark","providerName","parameters","modelType","baseModelName","replicas","label","k8sCluster","inferredType","cpu","gpu","memory"]),c.operateType=d,d=="add"?c.disabledField=!1:c.disabledField=!0}}),(i,s)=>{const d=U("Select"),n=U("Pane");return P(),E(n,{ref_key:"refPane",ref:B,class:"",onSubmit:w},{default:l(()=>[u("div",Ee,[e(ue,{ref_key:"refForm",ref:x,class:"my-form"},{default:l(()=>[e(g,{density:"compact",variant:"outlined",type:"text",placeholder:"只允许字母、数字、“-” 、“.” 和 “:” ","hide-details":"auto",clearable:"",rules:V.modelName,modelValue:a(o).modelName,"onUpdate:modelValue":s[0]||(s[0]=t=>a(o).modelName=t),disabled:c.disabledField},{prepend:l(()=>[We]),_:1},8,["rules","modelValue","disabled"]),e(g,{density:"compact",variant:"outlined",type:"number",placeholder:"上限 "+a(O).commaString(c.maxTokens),"hide-details":"auto",rules:V.maxTokens,modelValue:a(o).maxTokens,"onUpdate:modelValue":s[1]||(s[1]=t=>a(o).maxTokens=t),modelModifiers:{number:!0}},{prepend:l(()=>[Ye]),_:1},8,["placeholder","rules","modelValue"]),e(d,{placeholder:"请选择供应商",rules:V.providerName,mapDictionary:{code:"model_provider_name"},modelValue:a(o).providerName,"onUpdate:modelValue":s[2]||(s[2]=t=>a(o).providerName=t),disabled:c.disabledField},{prepend:l(()=>[u("label",He,[m("供应 "),e(N,null,{default:l(()=>[m("供应商指的是外部服务提供，自己有服务请选择Local")]),_:1})])]),_:1},8,["rules","modelValue","disabled"]),e(d,{placeholder:"请选择模型类型",rules:V.modelType,mapDictionary:{code:"model_type"},modelValue:a(o).modelType,"onUpdate:modelValue":[s[3]||(s[3]=t=>a(o).modelType=t),$],disabled:c.disabledField},{prepend:l(()=>[Ke]),_:1},8,["rules","modelValue","disabled"]),e(le,{modelValue:a(o).enabled,"onUpdate:modelValue":s[4]||(s[4]=t=>a(o).enabled=t),color:"primary","hide-details":"auto"},{prepend:l(()=>[u("label",null,[m("启用 "),e(N,null,{default:l(()=>[m("模型是否可被使用，如果关闭则无法使用该模型")]),_:1})])]),_:1},8,["modelValue"]),e(Be,{modelValue:a(o).remark,"onUpdate:modelValue":s[5]||(s[5]=t=>a(o).remark=t),modelModifiers:{trim:!0},placeholder:"请输入"},{prepend:l(()=>[je]),_:1},8,["modelValue"]),e(Se,null,{default:l(()=>[e(Ge,null,{default:l(()=>[e(qe,{elevation:"10"},{default:l(()=>[e(Ae,{class:"text-h6"},{default:l(()=>[m("高级")]),_:1}),e(Le,{class:"mt-4",eager:""},{default:l(()=>[e(d,{placeholder:"请选择基础模型",modelValue:a(o).baseModelName,"onUpdate:modelValue":s[6]||(s[6]=t=>a(o).baseModelName=t),mapAPI:{url:"/channels/models",data:{providerName:"LocalAI",modelType:"text-generation",baseModelName:"null"},labelField:"modelName",valueField:"modelName"},"hide-details":!1},{prepend:l(()=>[Ze]),_:1},8,["modelValue"]),e(le,{modelValue:a(o).isFineTuning,"onUpdate:modelValue":s[7]||(s[7]=t=>a(o).isFineTuning=t),disabled:c.disabledField,color:"primary"},{prepend:l(()=>[u("label",null,[m("微调 "),e(N,null,{default:l(()=>[m("是否是微调模型")]),_:1})])]),_:1},8,["modelValue","disabled"]),e(g,{density:"compact",variant:"outlined",type:"number",placeholder:"请输入参数量",modelValue:a(o).parameters,"onUpdate:modelValue":s[8]||(s[8]=t=>a(o).parameters=t),modelModifiers:{number:!0},style:{width:"60%"},disabled:c.disabledField},{prepend:l(()=>[u("label",null,[m("参数量(B) "),e(N,null,{default:l(()=>[m("单位是B，代理10亿")]),_:1})])]),_:1},8,["modelValue","disabled"]),a(o).modelType==="digitalhuman"?(P(),K(te,{key:0},[e(g,{type:"number",placeholder:"请输入并行/实例数",rules:V.replicas,modelValue:a(o).replicas,"onUpdate:modelValue":s[9]||(s[9]=t=>a(o).replicas=t),modelModifiers:{number:!0}},{prepend:l(()=>[Je]),_:1},8,["rules","modelValue"]),e(d,{placeholder:"请选择调度标签","hide-details":!1,mapDictionary:{code:"model_deploy_label"},modelValue:a(o).label,"onUpdate:modelValue":s[10]||(s[10]=t=>a(o).label=t)},{prepend:l(()=>[Oe]),_:1},8,["modelValue"]),e(d,{placeholder:"请选择k8s集群","hide-details":!1,mapDictionary:{code:"k8s_cluster"},modelValue:a(o).k8sCluster,"onUpdate:modelValue":s[11]||(s[11]=t=>a(o).k8sCluster=t)},{prepend:l(()=>[Xe]),_:1},8,["modelValue"]),e(se,{modelValue:a(o).inferredType,"onUpdate:modelValue":s[12]||(s[12]=t=>a(o).inferredType=t),inline:"",color:"primary"},{prepend:l(()=>[el]),default:l(()=>[e(j,{label:"CPU",value:"cpu"}),e(j,{label:"GPU",value:"gpu"})]),_:1},8,["modelValue"]),e(g,{type:"number",placeholder:"请输入使用CPU数量",rules:V.cpu,modelValue:a(o).cpu,"onUpdate:modelValue":s[13]||(s[13]=t=>a(o).cpu=t),modelModifiers:{number:!0}},{prepend:l(()=>[ll]),_:1},8,["rules","modelValue"]),e(g,{type:"number",placeholder:"请输入使用GPU数量",rules:V.gpu,modelValue:a(o).gpu,"onUpdate:modelValue":s[14]||(s[14]=t=>a(o).gpu=t),modelModifiers:{number:!0}},{prepend:l(()=>[al]),_:1},8,["rules","modelValue"]),e(g,{type:"number",placeholder:"请输入内存",rules:V.memory,modelValue:a(o).memory,"onUpdate:modelValue":s[15]||(s[15]=t=>a(o).memory=t),modelModifiers:{number:!0}},{prepend:l(()=>[ol]),"append-inner":l(()=>[m("G")]),_:1},8,["rules","modelValue"])],64)):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)])]),_:1},512)}}});const dl=ne(tl,[["__scopeId","data-v-2969599f"]]),H=C=>(de("data-v-d19493a6"),C=C(),re(),C),rl={class:"mx-auto mt-10",style:{width:"500px"}},nl=H(()=>u("label",{class:"required"},"模型名称",-1)),sl={class:"required"},ul={class:"required"},il=H(()=>u("label",{class:"required"},"推理类型",-1)),ml=H(()=>u("label",{class:"required"},"CPU数量",-1)),pl={class:"required"},fl=H(()=>u("label",null,"k8s集群",-1)),cl=H(()=>u("label",null,null,-1)),_l=X({__name:"ArrangeModel",emits:["submit"],setup(C,{expose:A,emit:L}){const c=/^\+?[1-9][0-9]*$/,o=W({operateType:"",maxTokens:5e5,id:"",modelName:"",isQuantify:!1,formData:{replicas:"",label:"",cpu:1,gpu:1,maxGpuMemory:"",quantization:"",vllm:"",inferredType:"cpu",k8sCluster:null}}),{formData:r,id:B}=ee(o),x=L,V=v(),$=v(),h=(d,n,t,S,p=!1)=>d?d<n?`下限 ${n}`:d>t?`上限 ${t}`:p&&c.test(d)!=!0?"请输入正整数":!0:S||!0,k=W({replicas:[d=>h(d,1,8,"请输入实例数量",!0)],label:[d=>!!d||"请选择调度标签"],gpu:[d=>h(d,1,8,"请输入使用GPU数量",!0)],cpu:[d=>h(d,1,80,"请输入使用CPU数量",!0)],maxGpuMemory:[d=>h(d,1,80,"",!0)],quantization:[d=>!!d||"请选择精度"],isQuantify:[d=>d&&d!=!1?!0:"请开启量化"],vllm:[d=>d&&d!=!1?!0:"请开启VLLM"]}),w=async(d={})=>{o.formData.quantization=o.isQuantify?"float16":""},i=d=>{d==="cpu"?o.formData.gpu=1:o.formData.cpu=1},s=async({valid:d,showLoading:n})=>{if(d){const t={...o.formData};t.inferredType==="cpu"?(t.gpu=0,t.maxGpuMemory=0):t.cpu=0,t.maxGpuMemory=t.maxGpuMemory||0;const[S,p]=await F.post({...n,showSuccess:!0,url:`/api/models/${o.id}/deploy`,data:t});p&&(V.value.hide(),x("submit"))}};return A({show({title:d,infos:n={id:"",modelName:""},operateType:t}){V.value.show({title:d,refForm:$}),o.formData=Y.pick(Y.cloneDeep(n),[]),o.formData.inferredType="cpu",o.formData.cpu=1,o.formData.gpu=1,o.operateType=t,o.modelName=n.modelName,o.id=n.id}}),(d,n)=>{const t=U("Select"),S=U("Pane");return P(),E(S,{ref_key:"refPane",ref:V,class:"",onSubmit:s},{default:l(()=>[u("div",rl,[e(ue,{ref_key:"refForm",ref:$,class:"my-form"},{default:l(()=>[e(g,{"hide-details":"auto",modelValue:o.modelName,"onUpdate:modelValue":n[0]||(n[0]=p=>o.modelName=p),disabled:!0},{prepend:l(()=>[nl]),_:1},8,["modelValue"]),e(g,{type:"number","hide-details":"auto",placeholder:"请输入使用实例数量",rules:k.replicas,modelValue:a(r).replicas,"onUpdate:modelValue":n[1]||(n[1]=p=>a(r).replicas=p),modelModifiers:{number:!0},onInput:n[2]||(n[2]=p=>h(a(r).replicas,1,8,"请输入实例数量",!0)),max:"8"},{prepend:l(()=>[u("label",sl,[m("实例数 "),e(N,null,{default:l(()=>[m("启动实例数量")]),_:1})])]),_:1},8,["rules","modelValue"]),e(t,{"hide-details":"auto",placeholder:"请选择调度标签",rules:k.label,mapDictionary:{code:"model_deploy_label"},modelValue:a(r).label,"onUpdate:modelValue":n[3]||(n[3]=p=>a(r).label=p)},{prepend:l(()=>[u("label",ul,[m("调度标签 "),e(N,null,{default:l(()=>[m("设置实例调度的节点亲和性")]),_:1})])]),_:1},8,["rules","modelValue"]),e(se,{modelValue:a(r).inferredType,"onUpdate:modelValue":[n[4]||(n[4]=p=>a(r).inferredType=p),i],inline:"",color:"primary","hide-details":"auto"},{prepend:l(()=>[il]),default:l(()=>[e(j,{label:"CPU",value:"cpu"}),e(j,{label:"GPU",value:"gpu"})]),_:1},8,["modelValue"]),a(r).inferredType==="cpu"?(P(),E(g,{key:0,type:"number",placeholder:"请输入使用CPU数量",rules:k.cpu,modelValue:a(r).cpu,"onUpdate:modelValue":n[5]||(n[5]=p=>a(r).cpu=p),modelModifiers:{number:!0},onInput:n[6]||(n[6]=p=>h(a(r).cpu,1,80,"请输入使用CPU数量",!0)),max:"80","hide-details":"auto"},{prepend:l(()=>[ml]),_:1},8,["rules","modelValue"])):q("",!0),a(r).inferredType==="gpu"?(P(),E(g,{key:1,type:"number",placeholder:"请输入使用GPU数量",rules:k.gpu,modelValue:a(r).gpu,"onUpdate:modelValue":n[7]||(n[7]=p=>a(r).gpu=p),modelModifiers:{number:!0},onInput:n[8]||(n[8]=p=>h(a(r).gpu,1,8,"请输入使用GPU数量",!0)),max:"8","hide-details":"auto"},{prepend:l(()=>[u("label",pl,[m("GPU数量 "),e(N,null,{default:l(()=>[m("单实例GPU数量")]),_:1})])]),_:1},8,["rules","modelValue"])):q("",!0),a(r).gpu>1?(P(),E(g,{key:2,type:"number",placeholder:"请输入GPU内存",rules:k.maxGpuMemory,modelValue:a(r).maxGpuMemory,"onUpdate:modelValue":n[9]||(n[9]=p=>a(r).maxGpuMemory=p),modelModifiers:{number:!0},onInput:n[10]||(n[10]=p=>h(a(r).maxGpuMemory,1,80,"",!0)),max:"80","hide-details":"auto"},{prepend:l(()=>[u("label",null,[m("GPU内存 "),e(N,null,{default:l(()=>[m("指定每个 GPU 用于存储模型权重的最大内存。这允许它为激活分配更多内存，因此您可以使用更长的上下文长度或更大的批量大小")]),_:1})])]),"append-inner":l(()=>[m(" GiB ")]),_:1},8,["rules","modelValue"])):q("",!0),e(t,{placeholder:"请选择k8s集群","hide-details":"auto",mapDictionary:{code:"k8s_cluster"},modelValue:a(r).k8sCluster,"onUpdate:modelValue":n[11]||(n[11]=p=>a(r).k8sCluster=p)},{prepend:l(()=>[fl]),_:1},8,["modelValue"]),e(ae,{label:"开启量化",modelValue:o.isQuantify,"onUpdate:modelValue":n[12]||(n[12]=p=>o.isQuantify=p),onChange:w,"hide-details":"auto",color:"primary"},{prepend:l(()=>[u("label",null,[m("量化 "),e(N,null,{default:l(()=>[m("对模型启动进行量化，节约显存提升推理速度")]),_:1})])]),_:1},8,["modelValue"]),ge(e(t,{placeholder:"请选择精度",mapDictionary:{code:"model_deploy_quantization"},modelValue:a(r).quantization,"onUpdate:modelValue":n[13]||(n[13]=p=>a(r).quantization=p),style:{"margin-top":"-14px"},"hide-details":"auto"},{prepend:l(()=>[cl]),_:1},8,["modelValue"]),[[ke,o.isQuantify]]),e(ae,{style:{"margin-top":"-14px"},label:"开启VLLM",modelValue:a(r).vllm,"onUpdate:modelValue":n[14]||(n[14]=p=>a(r).vllm=p),"hide-details":"auto",color:"primary"},{prepend:l(()=>[u("label",null,[m("VLLM "),e(N,null,{default:l(()=>[m("如果想要高吞吐量批量处理，您可以尝试开启，开启后会占用gpu的所有显存容量")]),_:1})])]),_:1},8,["modelValue"])]),_:1},512)])]),_:1},512)}}});const bl=ne(_l,[["__scopeId","data-v-d19493a6"]]),yl=["onClick"],Vl={key:0,style:{width:"80px"},class:"mx-auto mb-4"},hl=u("span",{class:"text-body-2 text-lightText"},"部署中",-1),xl={key:1},gl={class:"text-primary font-weight-black"},kl=u("br",null,null,-1),vl=u("br",null,null,-1),Tl=["innerHTML"],Yl=X({__name:"modelList",setup(C){const{loadDictTree:A,getLabels:L}=ve(),c=Te(),o=Ue(),r=W({style:{},formData:{modelName:"",enabled:null,providerName:null,modelType:null},selectedInfo:{id:"",modelName:""},tableInfos:{list:[],total:""},confirmByClickInfo:{html:"",action:"",row:{}}}),{style:B,formData:x}=ee(r),V=v(),$=v(),h=v(),k=v(),w=v(),i=v(),s=v({title:"模型列表"}),d=v([{text:"模型管理",disabled:!1,href:"#"},{text:"模型列表",disabled:!0,href:"#"}]),n=({id:_,modelName:b}={})=>{b?c.push("/model/chat-playground?modelName="+b+"&modelId="+_):c.push("/model/chat-playground")},t=({id:_,modelName:b})=>{c.push(`/model/model-list/detail?jobId=${_}&modelName=`+b)},S=_=>{let b=[];for(let y of _.operation)y=="edit"?b.push({text:"编辑",color:"info",click(){ce(_)}}):y=="delete"?b.push({text:"删除",color:"error",click(){me(_)}}):y=="deploy"?b.push({text:"部署",color:"info",click(){$.value.show({title:"部署模型",infos:_})}}):y=="undeploy"&&b.push({text:"卸载",color:"info",click(){Y.assign(r.confirmByClickInfo,{html:"确认卸载模型 <span class='text-primary mx-1  font-weight-black'>"+_.modelName+"</span>吗？",action:"undeploy",row:_}),w.value.show({width:"350px"})}});return b},p=(_={})=>{let{action:b,row:y}=r.confirmByClickInfo;b=="deploy"?_e(y,_):b=="undeploy"&&be(y,_)},ie=async(_={})=>{await A(["model_type"]);const[b,y]=await F.get({url:"/models",showLoading:k.value.el,data:{...r.formData,..._}});y?(r.tableInfos.list=y.list,r.tableInfos.total=y.total):(r.tableInfos.list=[],r.tableInfos.total=0),i.value.start()},M=()=>{k.value.query({page:1})},Z=()=>{k.value.query()},me=_=>{r.selectedInfo=_,h.value.show({width:"400px",confirmText:r.selectedInfo.modelName})},pe=async(_={})=>{const[b,y]=await F.delete({..._,showSuccess:!0,url:`/api/models/${r.selectedInfo.id}`});y&&(h.value.hide(),M())},fe=()=>{V.value.show({title:"添加模型",operateType:"add"})},ce=_=>{V.value.show({title:"编辑模型",infos:_,operateType:"edit"})},_e=async(_,b)=>{let[y,Q]=await F.post({...b,showSuccess:!0,url:`/api/models/${_.id}/deploy`});Q&&(w.value.hide(),Z())},be=async(_,b)=>{let[y,Q]=await F.post({...b,showSuccess:!0,url:`/api/models/${_.id}/undeploy`});Q&&(w.value.hide(),Z())};return Ce(()=>{let{modelName:_}=o.query;_&&(r.formData.modelName=_),M()}),(_,b)=>{const y=U("Select"),Q=U("refresh-button"),ye=U("ButtonsInForm"),Ve=U("el-tooltip"),D=U("el-table-column"),he=U("ButtonsInTable"),xe=U("TableWithPager");return P(),K(te,null,[e(Me,{title:s.value.title,breadcrumbs:d.value},null,8,["title","breadcrumbs"]),e(oe,null,{default:l(()=>[e(I,null,{default:l(()=>[e(De,null,{default:l(()=>[e(oe,null,{default:l(()=>[e(I,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(g,{density:"compact",modelValue:a(x).modelName,"onUpdate:modelValue":b[0]||(b[0]=f=>a(x).modelName=f),label:"搜索模型名称","hide-details":"",clearable:"",variant:"outlined",color:"red",onKeyup:Ne(M,["enter"]),"onClick:clear":M},null,8,["modelValue","onKeyup"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(y,{onChange:M,label:"请选择状态",mapDictionary:{code:"local_enabled"},modelValue:a(x).enabled,"onUpdate:modelValue":b[1]||(b[1]=f=>a(x).enabled=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(y,{onChange:M,label:"请选择模型类型",mapDictionary:{code:"model_type"},modelValue:a(x).modelType,"onUpdate:modelValue":b[2]||(b[2]=f=>a(x).modelType=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(y,{onChange:M,label:"请选择供应",mapDictionary:{code:"model_provider_name"},modelValue:a(x).providerName,"onUpdate:modelValue":b[3]||(b[3]=f=>a(x).providerName=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(ye,null,{default:l(()=>[e(J,{color:"primary",onClick:n},{default:l(()=>[m("聊天操场")]),_:1}),e(J,{color:"primary",onClick:fe},{default:l(()=>[m("添加模型")]),_:1}),e(Q,{ref_key:"refreshButtonRef",ref:i,onRefresh:Z},null,512)]),_:1})]),_:1}),e(I,{cols:"12"},{default:l(()=>[e(Pe,null,{default:l(()=>[m(" 修改之后将实时生效，请谨慎操作！ ")]),_:1})]),_:1}),e(I,{cols:"12"},{default:l(()=>[e(xe,{onQuery:ie,ref_key:"refTableWithPager",ref:k,infos:r.tableInfos},{default:l(()=>[e(D,{label:"模型",width:"200px",fixed:"left"},{default:l(({row:f})=>[e(Ve,{content:"查看详情",placement:"top"},{default:l(()=>[u("span",{class:"link",onClick:R=>t(f)},G(f.modelName),9,yl)]),_:2},1024)]),_:1}),e(D,{label:"最长上下文",width:"110px"},{default:l(({row:f})=>[u("span",null,G(f.maxTokens),1)]),_:1}),e(D,{label:"模型类型",width:"110px"},{default:l(({row:f})=>[u("span",null,G(a(L)([["model_type",f.modelType]])),1)]),_:1}),e(D,{label:"是否启用","min-width":"100px"},{default:l(({row:f})=>[e(Ie,{modelValue:f.enabled,"onUpdate:modelValue":R=>f.enabled=R},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"是否微调","min-width":"100px"},{default:l(({row:f})=>[e(we,{modelValue:f.isFineTuning,"onUpdate:modelValue":R=>f.isFineTuning=R},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"部署","min-width":"150px"},{default:l(({row:f})=>[f.deployStatus=="pending"?(P(),K("div",Vl,[e(Fe,{height:"24",striped:"",indeterminate:"",color:"#4eb879",rounded:"",class:"mx-auto"},{default:l(()=>[hl]),_:1})])):q("",!0),f.enabled&&f.modelType==="text-generation"?(P(),K("div",xl,[e(J,{onClick:R=>n(f),"prepend-icon":"mdi-chat",size:"small",variant:"outlined",color:"info"},{prepend:l(()=>[e(a(ze),{size:16})]),default:l(()=>[m(" 对话 ")]),_:2},1032,["onClick"])])):q("",!0)]),_:1}),e(D,{label:"备注","min-width":"200px","show-overflow-tooltip":""},{default:l(({row:f})=>[m(G(f.remark),1)]),_:1}),e(D,{label:"更新时间","min-width":"200px"},{default:l(({row:f})=>[m(G(a(O).dateFormat(f.updatedAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(D,{label:"操作","min-width":"120px",fixed:"right"},{default:l(({row:f})=>[e(he,{buttons:S(f)},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(dl,{ref_key:"refPaneModel",ref:V,onSubmit:M},null,512),e(bl,{ref_key:"refArrangeModel",ref:$,onSubmit:M},null,512),e(Qe,{ref_key:"refConfirmDelete",ref:h,onSubmit:pe},{text:l(()=>[m(" 您将要删除 "),u("span",gl,G(r.selectedInfo.modelName),1),m(" 模型，删除之后，"),kl,m(" 若有使用该模型的应用场景都将取消授权。 "),vl,m("确定要继续吗？ ")]),_:1},512),e(Re,{ref_key:"refConfirmByClick",ref:w,onSubmit:p},{text:l(()=>[u("div",{innerHTML:r.confirmByClickInfo.html},null,8,Tl)]),_:1},512)],64)}}});export{Yl as default};
